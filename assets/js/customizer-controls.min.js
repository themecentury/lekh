jQuery(document).ready(function(n){"use strict";function r(){n(".lekh-repeater-field-control-wrap").each(function(){var e=[],t=n(this);t.find(".lekh-repeater-field-control").each(function(){var i={};n(this).find("[data-name]").each(function(){var e=n(this).attr("data-name"),t=n(this).val();i[e]=t}),e.push(i)}),t.next(".lekh-repeater-collector").val(JSON.stringify(e)).trigger("change")})}n(".lekh-color-picker").wpColorPicker(),n("#customize-theme-controls").on("click",".lekh-repeater-field-title",function(){n(this).next().slideToggle(),n(this).closest(".lekh-repeater-field-control").toggleClass("expanded")}),n("#customize-theme-controls").on("click",".lekh-repeater-field-close",function(){n(this).closest(".lekh-repeater-fields").slideUp(),n(this).closest(".lekh-repeater-field-control").toggleClass("expanded")}),n("body").on("click",".lekh-repeater-add-control-field",function(){var e=n(this).parent();if(void 0!==e){var t=e.find(".lekh-repeater-field-control:first").clone();if(void 0!==t){t.find("input[type='text'][data-name]").each(function(){var e=n(this).attr("data-default");n(this).val(e)}),t.find(".lekh-repeater-icon-list").each(function(){var t=n(this).next("input[data-name]").attr("data-default");n(this).next("input[data-name]").val(t),n(this).prev(".lekh-repeater-selected-icon").children("i").attr("class","").addClass(t),n(this).find("li").each(function(){var e=n(this).find("i").attr("class");t==e?n(this).addClass("icon-active"):n(this).removeClass("icon-active")})}),t.find(".lekh-repeater-fields").show(),e.find(".lekh-repeater-field-control-wrap").append(t),t.addClass("expanded").find(".lekh-repeater-fields").show();var i=t.find(".lekh-color-picker").clone();t.find(".wp-picker-container").after(i),t.find(".wp-picker-container").remove(),t.find(".lekh-color-picker").wpColorPicker(),n(".accordion-section-content").animate({scrollTop:e.height()},1e3),r()}}return!1}),n("#customize-theme-controls").on("click",".lekh-repeater-field-remove",function(){return void 0!==n(this).parent()&&n(this).closest(".lekh-repeater-field-control").slideUp("normal",function(){n(this).remove(),r()}),!1}),n("#customize-theme-controls").on("keyup change","[data-name]",function(){return r(),!1}),n(".lekh-repeater-field-control-wrap").sortable({orientation:"vertical",update:function(e,t){r()}}),n("body").on("click",".lekh-repeater-icon-list li",function(){var e=n(this).find("i").attr("class");n(this).addClass("icon-active").siblings().removeClass("icon-active"),n(this).parent(".lekh-repeater-icon-list").prev(".lekh-repeater-selected-icon").children("i").attr("class","").addClass(e),n(this).parent(".lekh-repeater-icon-list").next("input").val(e).trigger("change"),r()}),n("body").on("click",".lekh-repeater-selected-icon",function(){n(this).next().slideToggle()})});